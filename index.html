<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <title>NUMBUTATOA - Pare de Andar Atoa</title>
    
    <!-- Google AdSense (substitua por AdMob em um ambiente Cordova) -->
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-9742063011288749",  // Seu ID do cliente do AdSense
            enable_page_level_ads: true
        });
    </script>
</head>
<body>
    <header>
        <h1>NUMBUTATOA</h1>
        <p class="slogan">PARE DE ANDAR ATOA</p> <!-- Classe para o slogan -->
    </header>

    <section id="pontos-section">
        <h2>Seus Pontos: <span id="pontosDisplay">0</span></h2>
        <p class="dica-uso">Ganhe pontos ao relatar e utilize-os para pesquisar ATMs!</p> <!-- Classe para a dica de uso -->
    </section>

    <section id="opcoes-section">
        <h2>O que você gostaria de fazer?</h2>
        <div>
            <button id="buscarATM">Buscar ATM</button>
            <button id="relatarATM">Relatar ATM</button>
            <a href="https://www.facebook.com/profile.php?id=61566547542597" target="_blank" id="suporteLink">
                <button>Solicitar Novo ATM / Suporte</button>
            </a>
        </div>
    </section>

    <!-- AdSense Banner (Exemplo para Web) -->
    <ins class="adsbygoogle"
         style="display:block; text-align:center;"
         data-ad-client="ca-pub-9742063011288749"
         data-ad-slot="2070402861"
         data-ad-format="auto"
         data-full-width-responsive="true"></ins>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/9.1.3/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCcVkEALq5uJH8yIpvIlnNLHBjPLUUzb_s",
            authDomain: "numbutatoa.firebaseapp.com",
            projectId: "numbutatoa",
            storageBucket: "numbutatoa.appspot.com",
            messagingSenderId: "659873259259",
            appId: "1:659873259259:web:eba1ce3a5c6c9ed79a9a5e",
            measurementId: "G-CRB1ML2JDB"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        function getPhoneId() {
            let phoneId = localStorage.getItem("phoneId");
            if (!phoneId) {
                phoneId = `phone_${new Date().getTime()}_${Math.random()}`;
                localStorage.setItem("phoneId", phoneId);
            }
            return phoneId;
        }

        const phoneId = getPhoneId();

        function inicializarPontos() {
            let pontos = parseInt(localStorage.getItem("pontos"), 10);
            let jaRecebeuPontosIniciais = localStorage.getItem("jaRecebeuPontosIniciais");

            // Se o usuário nunca acessou o site, inicializa com 5 pontos
            if (isNaN(pontos)) {
                localStorage.setItem("pontos", "5");
                localStorage.setItem("jaRecebeuPontosIniciais", "true");
                alert("Bem-vindo! Você recebeu 5 pontos iniciais.");
            }
        }

        function carregarPontos() {
            let pontos = parseInt(localStorage.getItem("pontos"), 10) || 0;
            document.getElementById("pontosDisplay").textContent = pontos;
        }

        function buscarATM() {
            let pontos = parseInt(localStorage.getItem("pontos"), 10) || 0;

            if (pontos <= 0) {
                alert("Você não tem pontos suficientes para buscar ATMs.");
                return;
            }

            pontos -= 1;
            localStorage.setItem("pontos", pontos);
            document.getElementById("pontosDisplay").textContent = pontos;

            window.location.href = "search/search.html";
        }

        function relatarATM() {
            window.location.href = "report/report.html"; // Redirecionar para relatar ATM
        }

        document.addEventListener("DOMContentLoaded", () => {
            inicializarPontos(); // Inicializa os pontos ao carregar a página
            carregarPontos();

            document.getElementById("buscarATM").addEventListener("click", buscarATM);
            document.getElementById("relatarATM").addEventListener("click", relatarATM);
        });
    </script>
</body>
</html>
